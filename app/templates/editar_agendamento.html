<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8"/>
    <title>Editar Agendamento | Painel Gestor</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css" rel="stylesheet">
    <link rel="stylesheet" href="/static/style.css">
</head>
<body>
<nav class="navbar navbar-expand-lg navbar-dark bg-primary">
  <div class="container-fluid">
    <span class="navbar-brand">Painel Gestor</span>
    <div class="d-flex">
      <a href="/agenda" class="btn btn-outline-light btn-sm me-2">Agenda</a>
      <a href="/logout" class="btn btn-outline-light btn-sm">Sair</a>
    </div>
  </div>
</nav>
<div class="container main-content py-4">
    <nav aria-label="breadcrumb">
      <ol class="breadcrumb">
        <li class="breadcrumb-item"><a href="/painel-gestor">Painel Gestor</a></li>
        <li class="breadcrumb-item"><a href="/agenda">Agenda</a></li>
        <li class="breadcrumb-item active" aria-current="page">Editar Agendamento</li>
      </ol>
    </nav>
    <div class="row justify-content-center">
      <div class="col-12 col-md-10 col-lg-8">
        <div class="card painel-card p-4">
          <h3 class="mb-4 text-primary"><i class="bi bi-pencil-square me-2"></i>Editar Agendamento</h3>
          <div class="alert alert-info mb-4">
            <strong>Agendamento ID:</strong> <span class="badge bg-secondary">{{agendamento.id}}</span><br>
            <strong>Paciente:</strong> {{agendamento.nome or '-'}} | <strong>Usuário:</strong> {{agendamento.usuario}}<br>
            <strong>Data:</strong> {{agendamento.data}} | <strong>Horário:</strong> {{agendamento.horario or '-'}} | <strong>Período:</strong> {{agendamento.periodo}}
          </div>
          <form method="post" action="/agenda/editar/{{agendamento.id}}">
            <h6 class="text-primary mb-3">Dados do Paciente</h6>
            <div class="row g-2 mb-3">
              <div class="col-md-6">
                <label class="form-label small">Nome completo</label>
                <input name="nome" class="form-control" placeholder="Nome completo" value="{{agendamento.nome or ''}}">
              </div>
              <div class="col-md-3">
                <label class="form-label small">Idade</label>
                <input name="idade" class="form-control" placeholder="Idade" value="{{agendamento.idade or ''}}">
              </div>
              <div class="col-md-3">
                <label class="form-label small">Telefone</label>
                <input name="telefone" class="form-control" placeholder="Telefone" value="{{agendamento.telefone or ''}}">
              </div>
              <div class="col-md-12 mt-2">
                <label class="form-label small">WhatsApp/Usuário</label>
                <input name="usuario" class="form-control" placeholder="WhatsApp/Usuário" value="{{agendamento.usuario or ''}}" required>
              </div>
            </div>
            <h6 class="text-primary mb-3 mt-4">Dados do Agendamento</h6>
            <div class="row g-2 mb-3">
              <div class="col-md-6">
                <label class="form-label small">Tipo de Atendimento</label>
                <select name="tipo" class="form-control" required>
                  <option value="Consulta" {% if agendamento.tipo == "Consulta" %}selected{% endif %}>Consulta</option>
                  <option value="Limpeza" {% if agendamento.tipo == "Limpeza" %}selected{% endif %}>Limpeza</option>
                  <option value="Clareamento" {% if agendamento.tipo == "Clareamento" %}selected{% endif %}>Clareamento</option>
                  <option value="Canal" {% if agendamento.tipo == "Canal" %}selected{% endif %}>Canal</option>
                  <option value="Extração" {% if agendamento.tipo == "Extração" %}selected{% endif %}>Extração</option>
                </select>
              </div>
              <div class="col-md-3">
                <label class="form-label small">Data</label>
                <input name="data" class="form-control" type="date" value="{{agendamento.data or ''}}" required>
              </div>
              <div class="col-md-3">
                <label class="form-label small">Período</label>
                <select name="periodo" class="form-control" required>
                  <option value="manhã" {% if agendamento.periodo == "manhã" %}selected{% endif %}>Manhã</option>
                  <option value="tarde" {% if agendamento.periodo == "tarde" %}selected{% endif %}>Tarde</option>
                </select>
              </div>
              <div class="col-md-4 mt-2">
                <label class="form-label small">Horário</label>
                <select name="horario" class="form-control" required>
                  <option value="08:00" {% if agendamento.horario == "08:00" %}selected{% endif %}>08:00</option>
                  <option value="09:00" {% if agendamento.horario == "09:00" %}selected{% endif %}>09:00</option>
                  <option value="10:00" {% if agendamento.horario == "10:00" %}selected{% endif %}>10:00</option>
                  <option value="11:00" {% if agendamento.horario == "11:00" %}selected{% endif %}>11:00</option>
                  <option value="14:00" {% if agendamento.horario == "14:00" %}selected{% endif %}>14:00</option>
                  <option value="15:00" {% if agendamento.horario == "15:00" %}selected{% endif %}>15:00</option>
                  <option value="16:00" {% if agendamento.horario == "16:00" %}selected{% endif %}>16:00</option>
                  <option value="17:00" {% if agendamento.horario == "17:00" %}selected{% endif %}>17:00</option>
                </select>
              </div>
              <div class="col-md-4 mt-2">
                <label class="form-label small">Convênio</label>
                <input name="convenio" class="form-control" placeholder="Convênio" value="{{agendamento.convenio or ''}}">
              </div>
            </div>
            <div class="d-flex justify-content-between align-items-center mt-4">
              <a href="/agenda" class="btn btn-outline-secondary"><i class="bi bi-arrow-left"></i> Voltar</a>
              <button type="submit" class="btn btn-warning px-4"><i class="bi bi-save me-1"></i>Salvar</button>
            </div>
          </form>
        </div>
      </div>
    </div>
</div>
</body>
</html>