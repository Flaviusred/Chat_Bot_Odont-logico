<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8"/>
    <title>Buscar Paciente | Painel Gestor</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="/static/style.css">
</head>
<body>
<nav class="navbar navbar-expand-lg navbar-dark bg-primary">
  <div class="container-fluid">
    <span class="navbar-brand">Painel Gestor</span>
    <div class="d-flex">
      <span class="navbar-text me-3">Ol치, {{user}}</span>
      <a href="/agenda" class="btn btn-outline-light btn-sm me-2">Agenda</a>
      <a href="/logout" class="btn btn-outline-light btn-sm">Sair</a>
    </div>
  </div>
</nav>
<div class="container main-content py-3">
    <h3 class="mb-3"><i class="bi bi-search"></i> Buscar Paciente</h3>
    <form method="get" action="/buscar-paciente" class="row mb-3 g-2 align-items-end">
        <div class="col-md-6">
            <input type="text" class="form-control" name="q" value="{{q}}" placeholder="Nome, telefone ou usu치rio">
        </div>
        <div class="col-md-2">
            <button class="btn btn-primary" type="submit"><i class="bi bi-search"></i> Buscar</button>
        </div>
    </form>
    <div>
      <span>Total: <b>{{total}}</b> paciente(s)</span>
    </div>
    <table class="table table-bordered mt-3">
        <thead>
            <tr>
                <th>Nome</th>
                <th>Usu치rio</th>
                <th>Telefone</th>
                <th>Tipo</th>
                <th>Data</th>
                <th>Hor치rio</th>
                <th>Status</th>
            </tr>
        </thead>
        <tbody>
        {% for ag in pacientes %}
            <tr>
                <td>{{ ag.nome or '-' }}</td>
                <td>{{ ag.usuario or '-' }}</td>
                <td>{{ ag.telefone or '-' }}</td>
                <td>{{ ag.tipo or '-' }}</td>
                <td>{{ ag.data or '-' }}</td>
                <td>{{ ag.horario or '-' }}</td>
                <td>{{ ag.status or 'Agendado' }}</td>
            </tr>
        {% else %}
            <tr>
                <td colspan="7" class="text-center text-muted">Nenhum paciente encontrado.</td>
            </tr>
        {% endfor %}
        </tbody>
    </table>
    {% if pages > 1 %}
    <nav>
      <ul class="pagination">
        {% for p in range(1, pages+1) %}
          <li class="page-item {% if p == page %}active{% endif %}">
              <a class="page-link" href="?q={{q}}&page={{p}}">{{p}}</a>
          </li>
        {% endfor %}
      </ul>
    </nav>
    {% endif %}
    <a href="/agenda" class="btn btn-secondary mt-3">Voltar para Agenda</a>
</div>
</body>
</html>